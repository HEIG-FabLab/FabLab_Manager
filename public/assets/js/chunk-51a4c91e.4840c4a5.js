(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51a4c91e"],{"6e1d":function(e,t,n){"use strict";n("a9ec")},a9ec:function(e,t,n){},d4d3:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-col",[n("v-card-title",[e._v("Informations du compte")])],1),e._v(" "),n("v-card-text",[n("v-col",[n("v-row",[n("v-col",[n("p",[e._v("Prénom : "+e._s(e.user.name))])]),e._v(" "),n("v-col",[n("p",[e._v("Addresse mail : "+e._s(e.user.email))])])],1),e._v(" "),n("v-row",[n("v-col",[n("p",[e._v("Nom : "+e._s(e.user.surname))])]),e._v(" "),n("v-col",[n("p",[e._v("Demandes en cours : "+e._s(e.jobs.length))])])],1)],1)],1)],1),e._v(" "),n("br"),e._v(" "),n("v-card",[n("v-card-title",[n("v-col",[e._v("Notifications par mail")]),e._v(" "),n("v-col",[n("v-switch",{on:{change:e.emailEnabledChanged},model:{value:e.emailEnabled,callback:function(t){e.emailEnabled=t},expression:"emailEnabled"}})],1)],1),e._v(" "),n("v-card-text",e._l(e.settingsItems,(function(t,i){return n("v-list-item",{key:t.name},[n("v-col",[e._v(" "+e._s(t.label)+" ")]),e._v(" "),n("v-col",[n("v-switch",{attrs:{value:t.name,loading:t.loading,disabled:t.loading},on:{change:function(t){return e.settingChanged(i)}},model:{value:e.enabledSettings,callback:function(t){e.enabledSettings=t},expression:"enabledSettings"}})],1)],1)})),1)],1)],1)},a=[],s=n("5530"),l=(n("d3b7"),n("159b"),n("c740"),n("b0c0"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("2f62")),o=[{label:"Nouveau statut",name:"notify_email_status",loading:!1,submitted:!1},{label:"Nouveaux messages",name:"notify_email_messages",loading:!1,submitted:!1},{label:"Nouveaux fichiers",name:"notify_email_files",loading:!1,submitted:!1}],c=o,d={data:function(){return{settingsItems:c,enabledSettings:[],emailEnabled:!0}},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["updateSettings","retrieveUser"])),{},{emailEnabledChanged:function(){var e=this;this.emailEnabled?(this.settingsItems.filter((function(t){return!e.user[t.name]})).forEach((function(t,n){e.settingChanged(n)})),this.enabledSettings=this.settingsItems.map((function(e){return e.name}))):(this.enabledSettings.forEach((function(t){var n=e.settingsItems.findIndex((function(e){return e.name==t}));e.settingChanged(n)})),this.enabledSettings=[])},settingChanged:function(e){var t=this.settingsItems[e];t.loading=!0,t.submitted=!0},init:function(){var e=this;this.enabledSettings=[],this.settingsItems.forEach((function(t){t.loading=!1,e.user[t.name]&&e.enabledSettings.push(t.name)})),this.emailEnabled=this.enabledSettings.length>0}}),computed:Object(s["a"])({},Object(l["c"])({user:"getUser",jobs:"getJobs"})),beforeMount:function(){this.init()},watch:{enabledSettings:function(){var e=this;this.emailEnabled=this.enabledSettings.length>0;var t=this.settingsItems.filter((function(e){return e.submitted}));if(t.length>0){t.forEach((function(e){return e.submitted=!1}));var n=t.map((function(t){return{name:t.name,value:e.enabledSettings.includes(t.name)}}));this.updateSettings(n).catch((function(){return e.$notify("error filled","Échec de la modification !","La modification n'a pas pu être appliquée",{duration:4e3,permanent:!1})})).finally((function(){return e.init()}))}}}},u=d,r=(n("6e1d"),n("2877")),m=Object(r["a"])(u,i,a,!1,null,null,null);t["default"]=m.exports}}]);